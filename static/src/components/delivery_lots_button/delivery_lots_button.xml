<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <!--
        Template idÃ©ntico al StoneExpandButton de sale_stone_selection.
        El popup se renderiza como DOM puro en document.body.
    -->
    <t t-name="delivery_stone_lots.DeliveryLotsButton" owl="1">
        <div class="dlots-field-wrapper" t-on-click="handleToggle">
            <button
                class="dlots-toggle-btn"
                t-att-class="state.isExpanded ? 'active' : ''"
                title="Ver/gestionar placas asignadas"
            >
                <i class="fa fa-th-large" t-if="!state.isExpanded"/>
                <i class="fa fa-chevron-up" t-if="state.isExpanded"/>
                <span
                    t-if="state.lotCount > 0 and !state.isExpanded"
                    class="dlots-count-badge"
                >
                    <t t-esc="state.lotCount"/>
                </span>
            </button>
        </div>
    </t>
</templates>